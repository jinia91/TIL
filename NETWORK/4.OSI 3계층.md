---


---

<h2 id="osi-3계층네트워크-계층">OSI 3계층(네트워크 계층)</h2>
<p>2계층에서 명심해야할 부분은 바로 이더넷 프로토콜이 LAN간의 규약이라는 점이다.</p>
<p>1계층의 프로토콜만 가지고는 허브로 연결된 LAN간의 목적지 구분조차 불가능했지만,</p>
<p>2계층의 이더넷프로토콜과 스위치(L2)를 사용하면 LAN간의 목적지 구분이 가능한 통신을 할 수 있다.</p>
<p>하지만 인터넷은 스위치로 묶인 LAN네트워크만이 아니라 LAN과 LAN들이 모여 WAN으로 연결된 전세계적 연결망이며, 이더넷프로토콜과 MAC테이블만으로 송신자가 원하는 데이터를 머나먼 다른 네트워크에 속한 수신자에게 전달하기는 불가능하다.</p>
<p>왜냐고?</p>
<p>분명 MAC주소는 전세계에서 하나뿐인 주소지만, 맥주소가 부여되는 방식은 규칙이 존재하지 않는다.</p>
<p>사실 맥주소가 적힌 우리의 랜카드는 그냥 무작위로 구매한것이므로 <strong>주민번호</strong>와 같은 식별 역할은 될지언정, 이것이 계층구조를 가져 쉽게 탐색이 가능한 <strong>집주소</strong> 같은 개념은 아닌 것이다.</p>
<p>같은 스위치로 묶인 같은 네트워크에서야, 스위치 내부에 맥주소가 테이블로 저장되어 찾아갈 수 있지만, 다른 네트워크간에는 맥주소만으로 원하는 수신자를 찾기가 불가능하다.</p>
<p>이젠 이 거대한 네트워크간의 연결에서 <strong>원하는 수신자를 찾아내고, 그 수신자에게 찾아갈 적절한 경로를 찾기 위한</strong> 새로운 약속(Protocol).</p>
<p>바로 3계층의 프로토콜들이 필요할 때다.</p>
<h2 id="ipinternet-protocol">IP(Internet Protocol)</h2>
<p>IP란 송신 컴퓨터(HOST)와 수신컴퓨터(HOST)간의 데이터 전달에서 핵심이 되는 정보 위주의 규약으로, 대표적인 내용으론 크게 호스트의 <strong>주소지정</strong>과 <strong>전송데이터의 패킷화</strong>를 담당한다.</p>
<h2 id="ip-주소">IP 주소</h2>
<p>위에서 여러번 말했다시피 IP는 네트워크에 연결된 단말기들에게 부여되는 고유주소, 집주소로 이해하면 편하다.</p>
<p>여기서 우리가 흔히 접하게 되는 IP주소는 IPversion4로서 32비트를 8비트단위로 끊어 10진수로 표시한 형태를 지닌다.</p>
<blockquote>
<p>ex) 192.23.1.4</p>
</blockquote>
<p>이 주소들은 인터넷 할당 번호 관리기관(Internet Assigned Numbers Authority, IANA)이라는 국제기구에서 전세계 국가들에게 할당을 해왔다.</p>
<p><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https://blog.kakaocdn.net/dn/cLbN1f/btq25ZYSmVP/3ThKaPNro3mfnFqz9gIhkK/img.png" alt="enter image description here"></p>
<p>IP주소를 할당할때에는 크게 <strong>네트워크ID</strong>와 <strong>호스트ID</strong> 로 구분되며, 네트워크 ID는 네트워크망의 크기에따라 ABCDE 클래스로 나뉜다.(CLASS할당)</p>
<p>위의 표에서처럼 A클래스 규모의 네트워크는 전세계에서 단 128개의 네트워크망만 존재하며 그 망에 속한 단말호스트의 개수는 각각 1600만개에 이른다.</p>
<p>반면 C클래스 규모의 네트워크는 200만개의 네트워크가 존재하게되고 각각 256개의 호스트를 갖게된다.</p>
<p>문제는 32비트로 표현할 수 있는 숫자는 2의 32제곱인 약 43억인데 인터넷이 보급되면서 주소가 급속도로 고갈되었고, 2011년 2월 4일부로 할당을 중지하기에 이르렀다.</p>
<p>물리적인 숫자의 한계로 인해 할당량이 남지 않게 된것인데, 이에 해결책으로  제시된 방법을 몇가지 소개해보겠다.</p>
<h3 id="공인-ip와-사설-ip">공인 IP와 사설 IP</h3>
<p>공인IP는 IANA에서 할당된 IP로 사용가능한 갯수가 제한적이다. 그래서 공인 IP를 관리하는 ISP(인터넷 서비스 제공자)들은 인터넷에 직접 연결되는 컴퓨터나 LAN을 관장하는 **스위치(L3, 라우터)**에만 공인 IP를 부여하고</p>
<p>LAN내에서는 사설IP를 사용하여 공인 IP갯수를 절약하는 방식을 사용한다.</p>
<p>쉽게 말해서 공인 IP는 아파트 이름, 사설 IP는 아파트 동,호 의 개념이라고 할 수 있다.</p>
<p>이해를 돕기위해 간단한 테스트를 해보자.</p>
<p>우선 하나의 WIFI에 컴퓨터와 핸드폰을 연결시켜 LAN에 속하게 한다.</p>
<p>다음으로 핸드폰과 노트북을 아래 네이버주소로 접속해보자<br>
<a href="https://search.naver.com/search.naver?where=nexearch&amp;sm=top_sug.pre&amp;fbm=0&amp;acr=1&amp;acq=IP%EC%A3%BC%EC%86%8C&amp;qdt=0&amp;ie=utf8&amp;query=ip+%EC%A3%BC%EC%86%8C+%ED%99%95%EC%9D%B8">https://search.naver.com/search.naver?where=nexearch&amp;sm=top_sug.pre&amp;fbm=0&amp;acr=1&amp;acq=IP주소&amp;qdt=0&amp;ie=utf8&amp;query=ip+주소+확인</a></p>
<p>두 단말기 모두 같은 IP로 표시가 될 것이다.</p>
<p>그럼 이제 컴퓨터의 CMD창을 열어 IPCONFIG를 쳐보자.</p>
<blockquote>
<p>연결별 DNS 접미사. . . . :<br>
링크-로컬 IPv6 주소 . . . . : FKJSDLVJWEVJ~~~~~~~~~<br>
IPv4 주소 . . . . . . . . . : 192.168.0.22<br>
서브넷 마스크 . . . . . . . : 255.255.255.0<br>
기본 게이트웨이 . . . . . . : 192.168.0.1</p>
</blockquote>
<p>이제 핸드폰의 WIFI설정에 들어가서 IP주소를 확인해보자</p>
<blockquote>
<p>192.168.0.10</p>
</blockquote>
<p>필자의경우 위처럼 IP주소가 서로 다르게 나온다.</p>
<p>분명 네이버에서 IP주소확인을 했을때는 같았는데? 이번엔 다르다?</p>
<p>전자에서 네이버검색을 통해 나온 IP가 바로 공인IP이고 후자에서 각 단말기마다 부여되어 구분되는 IP가 바로 사설IP이다.</p>
<p>사설 IP는 각 공인IP마다</p>
<ul>
<li>A 클래스 : 10.0.0.0 ~ 10.255.255.255</li>
<li>B 클래스 : 172.16.0.0 ~ 172.31.255.255</li>
<li>C 클래스 : 192.168.0.0 ~ 192.168.255.255</li>
</ul>
<p>대역 만큼 각각 가질수있으므로,</p>
<ul>
<li>AA아파트(공인IP)의 101동 101호(사설IP)</li>
<li>BB아파트(공인IP)의 101동 101호(사설IP)</li>
</ul>
<p>처럼 중복 할당이 가능하여 공인IP갯수를 크게 아낄수 있게된다.</p>
<h3 id="서브넷과-서브네팅">서브넷과 서브네팅</h3>
<p>위에서 잠시나온 클래스 할당방식은 과거 IP를 할당하기 위해 사용했던 방식이나, 인터넷의 예상을 뛰어넘은 보급속도와 IP기반 통신장비들의 발전으로 현재는 사용하지 않는다고 한다.(Classless)</p>
<p>그리고 기존의 클래스 방식의 물리적인 한계로 더이상 IP주소를 세분화하여 관리하기 힘들어지자 효율적인 IP관리를 위해 도입된 기술이 바로 서브넷이다.</p>
<p>서브넷은 쉽게 말해 하나의 큰 네트워크를 <strong>논리적인 가상의 작은 네트워크</strong>로 쪼갠것을 의미한다.</p>
<p>기존의 클래스 할당방식하에는 네트워크의 규모를 유동적으로 선택할 수 없어서 브로드캐스트가 매우 큰 A클래스 네트워크에  억지로 적절하지 않은 호스트가 들어간다던가하는 문제들이 존재했다.</p>
<p>이런 대규모 네트워크를 <strong>서브네팅</strong>을 통해 분할시켜 브로드캐스트 대역을 줄이고 통신성능을 보장해 IP주소를 낭비없이 사용하도록 하는것이다.</p>
<p>개념적으로는 이정도 이해하고 서브네팅을 하는 자세한 내용은 추후 글에 담도록하겠다.</p>
<h2 id="라우팅-라우터">라우팅, 라우터</h2>
<p>추후 추가</p>
<h2 id="ip-패킷">IP 패킷</h2>
<p>패킷이란 컴퓨터 네트워크에서 데이터를 전달하기 위해 사용하는 규격화 블록을 의미한다.</p>
<p>그동안 편지 보내기를 네트워크와 많이 비유해왔는데, 사실 네트워크 상에서는 편지보다 훨씬 큰 소포나 거대한 화물들도 운반되므로 현실에서 물류의 흐름에 가깝다.</p>
<p>1계층의 프로토콜만 가지고도, 거대한 데이터를 직렬연결로 바이트단위 교환을 통해 전송은 가능하지만, 수많은 단말기들이 연결되는 네트워크 환경은 이야기가 다르다.</p>
<p>현실의 광활한 공간이나 바다와는 다르게 네트워크 통신의 회선은 한정적이므로 너무 큰 대역폭을 가진 커다란 데이터를 한번에 전송하는 것은 효율적이지 못하며 여러 네트워크 장애를 유발할 수도 있다.</p>
<p>이때 패킷을 사용하면 손쉽게 해결이 가능하다.</p>
<p>디지털세상은 현실과는 다르게 어떠한크기의 데이터라도 손상없이 잘게 쪼개는것이 가능하다.</p>
<p>이렇게 쪼개진 데이터에 <strong>송수신 IP주소</strong>를 붙이고, 다시 <strong>재조립을 위한 부가정보</strong>들과 프로토콜들을 헤더에 부착한뒤 전송을 하면 IP주소를 통해 해당 패킷들은 수신자에게 도달하게 되고,</p>
<p>수신자는 패킷들을 모두 받은뒤 패킷에 적힌 <strong>재조립정보</strong>를 읽고 조립해서 해당데이터를 완성시킬수 있는 것이다.</p>
<p>그러나 3계층 IP프로토콜하의 <strong>패킷 교환방식</strong>은 흐름을 제어하는 기능이 없기 때문에, 각 패킷의 <strong>전송 순서</strong>를 보장하지 않으며</p>
<p>현실의 편지처럼 단방향, 일회성 통신으로 수신자를 향해 패킷을 보낼수만 있을 뿐, 이 패킷이 제대로 도착했는지 송신자가 알 방법이 없다.<strong>(비연결성, 비신뢰성)</strong></p>
<p>그렇다면 인터넷 네트워크상에서 보다 안전하고 확실한 패킷 전송방법은 없는것일까?</p>

