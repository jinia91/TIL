# 가상화

## 개요
물리적인 기기에서 가상 머신을 동작시키는 소프트웨어 기능 및 그런 동작을 돕는 하드웨어 기능의 조합

## 아키텍처 개요

### 물리기기 일반 OS


||
|-|
|프로세스|
|커널|
|물리기기|

### 물리기기 가상 머신


|| |
|-| -|
|가상머신,커널,프로세스|가상머신,커널,프로세스|
|리눅스 시스템|리눅스 시스템|
|가상화 소프트웨어||
|물리기기||

## 가상화 시스템 구성 예시

- 물리기기 os : 호스트 OS
- 가상 머신 동작 os : 게스트 OS

# 컨테이너

## 가상머신과의 차이점
- 가상 머신은 각 가상머신 전용의 가상 하드웨어와 커널을 사용하지만 컨테이너는 컨테이너가 동작하는 호스트 OS와 모든 컨테이너가 하나의 커널을 공유
  - 리눅스 베이스로 컨테이너를 만들면 윈도우에서 실행 못한다. 도커 데스크톱으로 실행하는경우는 wsl을 중간에 레이어로 두기 때문
- 가상머신에 비해 레이어가 훨씬 얇아서 실행속도가 빠름

## 컨테이너의 종류
- 시스템 컨테이너
  - 일반 리눅스 환경처럼 다양한 애플리케이션을 실행하기 위한 컨테이너
  - 최초 프로세스로 init프로세스를 실행하고 init가 각종 서비스를 실행해서 다양한 애플리케이션이 동작하는 환경을 만듬
- 애플리케이션 컨테이너
  - 컨테이너에서 하나의 애플리케이션만 동작하는 컨테이너로 시스템 컨테이너보다 훨씬 가벼움
  - 도커가 대표적인 애플리케이션 컨테이너

## 네임 스페이스
### 네임 스페이스 개념
- 리소스의 범위를 정의하고 관리하기 위한 개념으로 특정 리소스가 특정 범위내에서만 인식되고 사용할수 있로록 제한(scope)
- 리눅스 커널에서는 이 개념을 확장하여 시스템 리소슬르 프로세스 그룹마다 격리하는데 사용
- PID, 네트워크, 파일시스템에서의 네임스페이스 구분으로 리소스의 가시성과 접근성을 제어하는 메커니즘

#### 프로세스 ID 네임스페이스
- 시스템을 기동하면 모든 프로세스가 소속된 루트 프로세스 ID 네임스페이스가 존재

#### 컨테이너 정체
- 독립된 네임스페이스를 가지고 다른 프로세스와 실행환견이 나뉘는 하나 또는 여러 프로세스

## 컨테이너 보안 위험성

- 컨테이너는 호스트 시스템 및 모든 컨테이너가 커널을 공유하므로 커널에 취약점이 있으면 컨테이너 사용자로 인해 호스트 os 또는 다른 컨테이너의 정보가 누출될 위험이 있음
  
