# 프로세스와 메모리
## 프로세스의 동작
- 프로그램 카운터(PC)를 참조하여 수행될 명령을 메모리에서 읽어 CPU로 수행하는것

## 기억장치 계층구조

<img width="519" alt="image" src="https://github.com/jinia91/TIL/assets/85499582/009200d8-02be-4546-925d-2b137c24df89">

## 메모리 관리?
- 메모리 호출: 언제 새로운 프로세스를 메모리에 둘것인가?
- 메모리 배치: 다음에 실행될 프로세쓰를 메모리 내의 어느곳에 둘 것인가?
- 메모리 교체: 메모리가 꽉 찬 상태에서 새로운 프로세스를 메모리에 적재해야한다면 어떤 프로세스를 제거할 것인가?

# 단일 프로그래밍 환경
> 하나의 프로세스만 메모리를 전용으로 사용하는 것
## 단점
- 메모리 용량을 초과하는 프로세스는 실행 못함
- 메모리 낭비가 심함
  - 지속적으로 사용되지 않는 프로세스도 메모리에 계속 적재
- 주변장치 등 자원의 낭비 심함
  - 계산 위주의 사용자 프로세스
  - 입출력 위주의 사용자 프로세스

# 다중프로그래밍 환경
> 여러개의 프로세스가 메모리에 동시에 적재되는 것
- cpu 연산과 입출력을 동시에 함으로써 CPU 이용도와 시스템 처리량 증가
## 메모리상에 어떻게 여러 프로세스를?... 메모리 분할(고전적방식)
- 여러 프로세스를 메모리에 적재하기위해 고안된 방법
- 하나의 분할에 하나의 프로세쓰가 적재되는 방식
- 종류 : 고정분할, 동적분할

### 고정분할
- 메모리를 여러개의 고정된 크기의 영역으로 분할
- 방법1
  - 분할영역마다 큐를 두고 큐에 들어온 프로세스는 해당 분할영역에만 적재
  - 절대 번역, 컴파일을하고 적재해야함
  - 효율성이 떨어짐
- 방법2
  - 대기큐를 두고 디스패쳐로 분할영역에 적재
  - 재배치 가능 번역 및 적재를해야하므로 복잡함

- 문제점 : 내부 단편화

### 동적분할
- 메모리의 분할경계가 고정되지 않음
- 각 프로세스에 필요한 만큼의 메모리만 할당
- 문제점 : 외부 단편화 발생!
  - 메모리의 할당과 반환이 반복됨에 따라 작은 크기의 공백이 메모리 공간에 흩어져 생김

#### 통합
- 인접된 공백을 더 큰하나의 공백으로 만들어 외부 단편화 해결
- 한계가 있음...

#### 집약
- 메모리 내에 있는 모든 공백을 하나로 모아 외부 단편화 해결
- 기존 프로세스들의 메모리 주소를 이동시켜하는데?

#### 메모리 보호
- 프로세스가 다른 할당영역을 침범하지 않게 하는것
- 하한-상한 또는 하한-크기를 레지스터에 쌍으로 저장함으로서 제한
- 이 제한 넘어 호출하려면 운영체제를 넘거 시스템 호출해야함

## 메모리 배치 기법
- 동적 분할 다중 프로그래밍에서 새로 반입된 프로그램이나 데이터를 메모리의 어느 위치에 배치할 것인가를 결정

### 최초적합
- 프로세스가 적재될 수 있는 빈 공간중에서 가장 먼저 발견되는 곳을 할당
### 후속적합
- 최초적합의 변형
- 이전에 탐색이 끝난 그 다음부분부터 시작하여 사용 가능한 빈 공간 중에서 가장 먼저 발견되는곳을 할당
### 최적적합
- 필요한 공간을 제공할 수 있는 빈공간중 가장 작은곳을 선택하여 할당
- 모든 탐색을 해야함
- 큰 빈공간을 최대한 많이 남겨 놓기 위함
### 최악적합
- 필요한 공간을 제공할 수 있는 빈 공간 중 가장 큰 곳을 선택하여 할당
- 작은 자투리가 남아 사용되지 못하는 공간이 발생하는것을 최소화하기 위한 방법

> 보통은 
