# 병행프로세스의 개요
> Concurrency, 동시성
## 병행성과 병행 프로세스
병행성 : 여러개의 프로세스 또는쓰레드가 '동시' 수행되는 시스템의 특성!
병행 프로세스 : 동시 수행되는 여러개의 프로세스 또는 쓰레드

## 병행 프로세스의 실행 형태
### 1개의 CPU : 인터리빙 형식 (RR으로 동시에 처리하는것처럼 보이는것)
### 여러개의 CPU : '병렬' 처리 형식

## 멀티 프로세서 시스템에서의 메모리구조에 따라
- 강결합 시스템(공유 메모리 구조)
- 약결합 시스템(분산 메모리 구조)
  - CPU마다 메모리를 별도로 보유하고 이를 통신으로 공유

## 프로세스간의 관계
### 독립 프로세스
- 수행 중인 다른 프로세스에 영향을 주지도 받지도 않음
- 데이터 및 상태를 다른 프로세스와 공유하지 않음
- 프로세스의 실행
  - 결정적 : 실행결과는 입력에 의해서만 결정됨
  - 재생가능 : 같은 입력에 대해 항상 동일한 실행결과

### 협력 프로세스
- 수행중인 다른 프로세스와 영향을 주고받음
- 데이터 및 상태를 다른 프로세스와 공유
- 프로세스의 실행
  - 비결정적 : 실행결과는 실행순서에 좌우
  - 재생불가능 : 같은 입력에 대해 항상 동일한 실행결과를 보장하지 못함

# 병행성 문제 : 협력프로세스인 경우 발생가능

## 상호배제

> 2개 이상의 프로세스가 동시에 임계영역을 수행하지 못하도록 하는 것

임계영역 : 2개 이상의 프로세스가 동시에 사용하면 안되는 공유자원을 액세스하는 프로그램 코드 영역


## 동기화
> 2개 이상의 프로세스에 대한 처리 순서를 결정하는 것

- 프로세스 동기화(sync)
- 상호배제도 임계영역에 대한 동기화문제로 볼 수 있음

## 통신
> 프로세스들이 데이터를 공유하기 위해 반드시 필요
- 프로세스간 통신(IPC)
- 방법
  - 하나의 변수 사용
  - 메시지를 서로 주고받음

# 세마포어
> 상호배제오 ㅏ동기화 문제를 해결하기 위한 도구, 다익스트라가 제안

## 정수형 공용변수를 가짐
- 저장값 : 사용 가능한 자원의 수 또는 잠김이나 풀림의 상태(0,1)
- 상황에 맞춰 0 이상인 정수로 초기화
- 두 기본연산 P와 V에 의해서만 사용됨
  - 기본연산 : 인터럽트되지 않고 하나의 단위로 처리됨

## 연산 P
 - 검사, 감소시키려는 시도
 
 <img width="442" alt="스크린샷 2023-03-25 오후 8 31 48" src="https://user-images.githubusercontent.com/85499582/227714959-9712e1a2-6a81-4809-8753-343d3ce27d25.png">
 
- 동시성 이슈를 피하기 위해 프로세스 락같은개념

## 연산 V
- 증가


<img width="419" alt="스크린샷 2023-03-25 오후 8 32 48" src="https://user-images.githubusercontent.com/85499582/227714992-c35f525d-75ab-4bda-84fb-272f64a4a5c0.png">


## 세마포어마다 대기 큐 필요

## 상호 배제 해결
### 상호배제를 위한 일반적인 요구사항
- 한 프로세스가 임계영역 수행중 : 다른 프로세스는 임계영역에 진입해서는 안됨
- 임계영역 수행중이던 프로세스가 임계영역 벗어남 : 누군가 하나는 임계영역을 새로이 수행할 수 있어야함
- 임계영역 진입 못하고 대기하는 프로세스 : 적절한 시간 내에 임계영역 수행을 시작할 수 있어야함

### 상호배제를 위한 임계영역 주번의 코드영역

<img width="619" alt="스크린샷 2023-03-25 오후 8 35 32" src="https://user-images.githubusercontent.com/85499582/227715118-00e06ebc-e9f3-45ee-921f-dad46d11ded6.png">

<img width="321" alt="스크린샷 2023-03-25 오후 8 35 59" src="https://user-images.githubusercontent.com/85499582/227715139-50213e83-07b3-4063-9014-76bd43590ab2.png">

## 동기화도 해결가능

<img width="628" alt="image" src="https://user-images.githubusercontent.com/85499582/227715431-007ffac0-44e2-4ecc-a8e3-4f3c184f8b35.png">

- 비동기적 행위들의 순서 제어가 가능해질수 있다
